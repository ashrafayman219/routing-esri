const data = {
  status: true,
  message: "Data found",
  pickup: [
    {
      customer_id: 7,
      address_id: 7,
      customer_name: "Elliott John W Esq",
      customertype: "Commercials",
      email: "test2@gmail.com",
      phone: "8340352592",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 6.60149695367501809784016586490906774997711181640625,
      longitude: 3.3502846703613275991529008024372160434722900390625,
      distance: "748.21km",
      address: "5 Jolly Star Close, Allen 101233, Ikeja, Nigeria",
      pincode: null,
      country: "Nigeria",
      state: "Lagos",
      city: "Ikeja",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28313],
      orderId: [null],
      requested_bin: [
        {
          id: 12,
          name: "wheelie bin",
          quantity: 2,
        },
      ],
    },
    {
      customer_id: 4,
      address_id: 4,
      customer_name: "Urban 2",
      customertype: "Commercials",
      email: "urban2@gmail.com",
      phone: "8100012510",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 6.6017101076556716776622124598361551761627197265625,
      longitude: 3.3517008767211908804029008024372160434722900390625,
      distance: "748.3km",
      address: "53 Allen Ave, Allen 101233, Ikeja, Nigeria",
      pincode: null,
      country: "Nigeria",
      state: "Lagos",
      city: "Ikeja",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28311],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 3,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 2,
        },
      ],
    },
    {
      customer_id: 5,
      address_id: 5,
      customer_name: "Alan D Rosenburg Cpa Pc",
      customertype: "Commercials",
      email: "test1@gmail.com",
      phone: "8100012511",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 6.6018379999999989848902259836904704570770263671875,
      longitude: 3.3518725380981440054029008024372160434722900390625,
      distance: "748.32km",
      address: "53 Allen Ave, Allen 101233, Ikeja, Nigeria",
      pincode: null,
      country: "Nigeria",
      state: "Lagos",
      city: "Ikeja",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28312],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 7,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1070,
      address_id: 1056,
      customer_name: "dfgffd gffgd gdfgfdg",
      customertype: "Residential",
      email: "gfh@gmail.com",
      phone: "4567898789",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 6.74105899999999991223376127891242504119873046875,
      longitude: 3.42116899999999990455989973270334303379058837890625,
      distance: "765.59km",
      address: "Ibadan Expressway, Lagos - Ibadan Expressway, Ibafo, Nigeria",
      pincode: 110113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan South west",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28371],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1068,
      address_id: 1054,
      customer_name: "Ram kumar das",
      customertype: "Commercials",
      email: "ghjh@gmail.com",
      phone: "5678987670",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.3918354533795227467862787307240068912506103515625,
      longitude: 3.86258220253905992791487733484245836734771728515625,
      distance: "852.25km",
      address: "9VR7+P2 Ibadan, Nigeria",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North west",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28369],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 3236,
      address_id: 3216,
      customer_name: "kunj kumar kiran",
      customertype: "Residential",
      email: "k.kunj.kiran@gmail.com",
      phone: "8767676567",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.35696999999999956543206280912272632122039794921875,
      longitude: 3.929910000000000014352963262354023754596710205078125,
      distance: "852.32km",
      address: "Iyonu Medicine",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North East",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28379],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 2,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 2,
        },
      ],
    },
    {
      customer_id: 3235,
      address_id: 3215,
      customer_name: "novelty",
      customertype: "Commercials",
      email: "suresh.rana@gmail.com",
      phone: "6787898987",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.3582999999999998408384271897375583648681640625,
      longitude: 3.928990000000000204494199351756833493709564208984375,
      distance: "852.4km",
      address: "Ibadan North East, Oyo",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North East",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28378],
      orderId: [null],
      requested_bin: [
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 3234,
      address_id: 3214,
      customer_name: "sajun das kumar",
      customertype: "Residential",
      email: "pathroura@gmail.com",
      phone: "9790989878",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.3879400000000003956301952712237834930419921875,
      longitude: 3.8825500000000001676880856393836438655853271484375,
      distance: "852.9km",
      address: "Pools",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North East",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28377],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1069,
      address_id: 1055,
      customer_name: "fsdfsdfdf dfdfdsf dfdsff",
      customertype: "Residential",
      email: "det@gmail.com",
      phone: "5678987867",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.38025933629914820954809329123236238956451416015625,
      longitude: 3.91270732460937242791487733484245836734771728515625,
      distance: "853.71km",
      address: "21 Olanase Junction Road, 200258, Ibadan, Oyo, Nigeria",
      pincode: 200258,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North East",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28370],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 3,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 5,
        },
      ],
    },
    {
      customer_id: 1064,
      address_id: 1050,
      customer_name: "fghg",
      customertype: "Commercials",
      email: "ieuy@gmail.com",
      phone: "6545566778",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.3571061937449968581859138794243335723876953125,
      longitude: 3.95802592812499742791487733484245836734771728515625,
      distance: "853.81km",
      address: "9X45+R6 Ibadan, Nigeria",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North west",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28365],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 5,
        },
      ],
    },
    {
      customer_id: 1063,
      address_id: 1049,
      customer_name: "gsdgsg",
      customertype: "Commercials",
      email: "lkj@gmail.com",
      phone: "8765678767",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.38638790663867528252239935682155191898345947265625,
      longitude: 3.91820048867187242791487733484245836734771728515625,
      distance: "854.59km",
      address: "9WP9+R7X, Oluyoro Street, 200258, Ibadan, Oyo, Nigeria",
      pincode: 200258,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28364],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 3,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1071,
      address_id: 1057,
      customer_name: "wtttw",
      customertype: "Commercials",
      email: "rrt@gmail.com",
      phone: "4566789763",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.3605452999999982921508490107953548431396484375,
      longitude: 3.97289699999999879054257689858786761760711669921875,
      distance: "854.93km",
      address: "Ibadan Airport, Ibadan, Nigeria",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North west",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28372],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 3,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1065,
      address_id: 1051,
      customer_name: "fsdfgdf",
      customertype: "Commercials",
      email: "jhgds@gmail.com",
      phone: "1234568555",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.38502600946025467010258580558001995086669921875,
      longitude: 3.92850017128905992791487733484245836734771728515625,
      distance: "855km",
      address: "60 Irewumi St, 200258, Ibadan, Oyo, Nigeria",
      pincode: 200258,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan South west",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28366],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 6,
        },
      ],
    },
    {
      customer_id: 1043,
      address_id: 1029,
      customer_name: "dfgdfd",
      customertype: "Commercials",
      email: "kju@gmail.com",
      phone: "9876789876",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North East",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28344],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1044,
      address_id: 1030,
      customer_name: "rajit",
      customertype: "Commercials",
      email: "raaaj@gmail.com",
      phone: "7654345678",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28345],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 7,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 6,
        },
      ],
    },
    {
      customer_id: 1045,
      address_id: 1031,
      customer_name: "sdsds",
      customertype: "Commercials",
      email: "hug@gmail.com",
      phone: "4567897783",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28346],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 3,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 5,
        },
      ],
    },
    {
      customer_id: 1046,
      address_id: 1032,
      customer_name: "dfdfd",
      customertype: "Commercials",
      email: "upt@gmail.com",
      phone: "9876567897",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28347],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 7,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 6,
        },
      ],
    },
    {
      customer_id: 1047,
      address_id: 1033,
      customer_name: "fgfgfg",
      customertype: "Commercials",
      email: "ytu@gmail.com",
      phone: "5678987890",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28348],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 6,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1048,
      address_id: 1034,
      customer_name: "dfdfdf",
      customertype: "Commercials",
      email: "jhu@gmail.com",
      phone: "5678987656",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28349],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1049,
      address_id: 1035,
      customer_name: "ddfdfd",
      customertype: "Commercials",
      email: "iuy@gmail.com",
      phone: "8986767867",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28350],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 3,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1050,
      address_id: 1036,
      customer_name: "dgdg",
      customertype: "Commercials",
      email: "uyt@gmail.com",
      phone: "7689876547",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28351],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 5,
        },
      ],
    },
    {
      customer_id: 1051,
      address_id: 1037,
      customer_name: "fdfsfs",
      customertype: "Commercials",
      email: "uy@gmail.com",
      phone: "7689876548",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28352],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1052,
      address_id: 1038,
      customer_name: "fsfsf",
      customertype: "Commercials",
      email: "ghjh@gmail.com",
      phone: "5678987890",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28353],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1053,
      address_id: 1039,
      customer_name: "fdfsdfs",
      customertype: "Commercials",
      email: "ufgf@gmail.com",
      phone: "7689874545",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28354],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 6,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 6,
        },
      ],
    },
    {
      customer_id: 1054,
      address_id: 1040,
      customer_name: "fdsfs",
      customertype: "Commercials",
      email: "ghjk@gmail.com",
      phone: "4567897890",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28355],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 6,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1055,
      address_id: 1041,
      customer_name: "dsfsfs",
      customertype: "Commercials",
      email: "hgn@gmail.com",
      phone: "5678767897",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28356],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 3,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 2,
        },
      ],
    },
    {
      customer_id: 1056,
      address_id: 1042,
      customer_name: "dfdsf",
      customertype: "Commercials",
      email: "jhuy@gmail.com",
      phone: "8765678765",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28357],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 6,
        },
      ],
    },
    {
      customer_id: 1057,
      address_id: 1043,
      customer_name: "dfds",
      customertype: "Commercials",
      email: "uyyt@gmail.com",
      phone: "6544456755",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28358],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 3,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1058,
      address_id: 1044,
      customer_name: "edfs",
      customertype: "Commercials",
      email: "iut@gmail.com",
      phone: "7656789786",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28359],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 34,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 3,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1059,
      address_id: 1045,
      customer_name: "fdsesf",
      customertype: "Commercials",
      email: "jhgh@gmail.com",
      phone: "4567898789",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28360],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 4,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1060,
      address_id: 1046,
      customer_name: "regfg",
      customertype: "Commercials",
      email: "kjhg@gmail.com",
      phone: "5678987656",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28361],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 4,
        },
      ],
    },
    {
      customer_id: 1061,
      address_id: 1047,
      customer_name: "fdgdg",
      customertype: "Commercials",
      email: "jhkj@gmail.com",
      phone: "5678987896",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28362],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 5,
        },
      ],
    },
    {
      customer_id: 1062,
      address_id: 1048,
      customer_name: "gfsgg",
      customertype: "Commercials",
      email: "dfg@gmail.com",
      phone: "3456789876",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28363],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 6,
        },
      ],
    },
    {
      customer_id: 1066,
      address_id: 1052,
      customer_name: "tretr",
      customertype: "Commercials",
      email: "hjkh@gmail.com",
      phone: "5859946566",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37753549999999957975660436204634606838226318359375,
      longitude: 3.947039600000000092450136435218155384063720703125,
      distance: "855.23km",
      address: "Ibadan, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28367],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1072,
      address_id: 1058,
      customer_name: "dgdgdf",
      customertype: "Commercials",
      email: "trt@gmail.com",
      phone: "6789098909",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.37749409999999983256202540360391139984130859375,
      longitude: 3.947132499999999932782657197094522416591644287109375,
      distance: "855.23km",
      address: "5 Pepsi Rd, 200113, Ibadan, Oyo, Nigeria",
      pincode: 200113,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North East",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28373],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 5,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 1067,
      address_id: 1053,
      customer_name: "ryyr",
      customertype: "Commercials",
      email: "lkjg@gmail.com",
      phone: "2365412313",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.36595900875148767994460285990498960018157958984375,
      longitude: 3.98137187539062242791487733484245836734771728515625,
      distance: "855.91km",
      address: "9X8J+9G Ibadan, Nigeria",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North East",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28368],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 5,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 4,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 6,
        },
      ],
    },
    {
      customer_id: 1,
      address_id: 1081,
      customer_name: "Pankaj pvt ltd",
      customertype: "Commercials",
      email: "pkpk8383@gmail.com",
      phone: "8340352596",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/Image-1670932037445-1440.jpg",
      latitude: 7.41873868780959977442535091540776193141937255859375,
      longitude: 3.89650507486879238427945892908610403537750244140625,
      distance: "856.64km",
      address: "56 Oyo Rd, Mokola Hill 200285, Sango, Oyo, Nigeria",
      pincode: 200285,
      country: "Nigeria",
      state: "Oyo",
      city: "Akinyele",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28375],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 3,
        },
        {
          id: 1,
          name: "Mammoth Bin",
          quantity: 3,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
    {
      customer_id: 3233,
      address_id: 3213,
      customer_name: "Ujala",
      customertype: "Commercials",
      email: "pkpk8383@gmail.com",
      phone: "9608450778",
      image:
        "https://mottainaiadmin.collanomics.net/public/images/customers/default_user.png",
      latitude: 7.47100999999999970668795867823064327239990234375,
      longitude: 3.913180000000000102744479590910486876964569091796875,
      distance: "862.64km",
      address: "New Oyo Expy, Ibadan, Akinyele, Oyo",
      pincode: null,
      country: "Nigeria",
      state: "Oyo",
      city: "Ibadan North",
      pickup_end_time: null,
      pickup_date: "2024-03-31",
      is_accept: false,
      is_accepted: "0",
      wastestream: ["Trash"],
      pickupId: [28376],
      orderId: [null],
      requested_bin: [
        {
          id: 4,
          name: "Dino Bin",
          quantity: 2,
        },
        {
          id: 12,
          name: "wheelie bin",
          quantity: 3,
        },
      ],
    },
  ],
  total_assigned: 38,
  extraAssign: 0,
  total_pending: 38,
  total_completed: 0,
  isExtraAssign: false,
};

require([
  "esri/config",
  "esri/Map",
  "esri/views/MapView",
  "esri/layers/FeatureLayer",
  "esri/request",
  "esri/Graphic",
  "esri/rest/route",
  "esri/rest/support/RouteParameters",
  "esri/rest/support/FeatureSet",
  "esri/widgets/Track",
  "esri/widgets/Locate",
  "esri/layers/RouteLayer",
  "esri/layers/GraphicsLayer",
  "esri/geometry/geometryEngineAsync",
  "esri/geometry/Point",
  "esri/layers/GeoJSONLayer",
], (
  esriConfig,
  Map,
  MapView,
  FeatureLayer,
  esriRequest,
  Graphic,
  route,
  RouteParameters,
  FeatureSet,
  Track,
  Locate,
  RouteLayer,
  GraphicsLayer,
  geometryEngineAsync,
  Point,
  GeoJSONLayer
) => {
  esriConfig.apiKey =
    "AAPK0f1f265391ac4ce3bf612ba0e57cd15bCmtNyrTEfVrWnGx9lB1L-OyOoSyaN5brwXC2X4C8IwiMgzH6z2VlPFDDnHME9P5Z";
  const routeUrl =
    "https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World";

  function convertToGeoJSON(data) {
    const geoJSON = {
      type: "FeatureCollection",
      features: [],
    };

    data.pickup.forEach((item) => {
      const feature = {
        type: "Feature",
        geometry: {
          type: "Point",
          coordinates: [item.longitude, item.latitude],
        },
        properties: {
          customer_id: item.customer_id,
          customer_name: item.customer_name,
          customertype: item.customertype,
          email: item.email,
          phone: item.phone,
          image: item.image,
          distance: item.distance,
          address: item.address,
          pincode: item.pincode,
          country: item.country,
          state: item.state,
          city: item.city,
          pickup_end_time: item.pickup_end_time,
          pickup_date: item.pickup_date,
          is_accept: item.is_accept,
          is_accepted: item.is_accepted,
          wastestream: item.wastestream,
          pickupId: item.pickupId,
          orderId: item.orderId,
          requested_bin: item.requested_bin,
        },
      };
      geoJSON.features.push(feature);
    });

    return geoJSON;
  }
  const geoJSONData = convertToGeoJSON(data);
  // var geoJSONDataF = JSON.stringify(geoJSONData, null, 2);
  // console.log(JSON.stringify(geoJSONData, null, 2), "geoJSONData");

  // create a new blob from geojson featurecollection
  const blob = new Blob([JSON.stringify(geoJSONData)], {
    type: "application/json",
  });

  // URL reference to the blob
  const url = URL.createObjectURL(blob);
  // create new geojson layer using the blob url
  const myLayer = new GeoJSONLayer({
    url,
    renderer: {
      type: "simple",
      field: "id",
      symbol: {
        type: "picture-marker",
        url: "https://arcgis.github.io/arcgis-samples-javascript/sample-data/cat3.png",
        // color: "#69dcff",
        width: "38px",
        height: "38px",
      },
    },
  });

  const optResultsLayer = new GraphicsLayer({ id: "optimized" });

  const map = new Map({
    basemap: "hybrid",
    layers: [myLayer, optResultsLayer],
  });
  const view = new MapView({
    center: [31.554, 30.5689],
    container: "viewDiv",
    map: map,
    zoom: 3,
  });

  view.whenLayerView(myLayer).then(function (layerView) {
    view.goTo(
      {
        target: myLayer.fullExtent,
        // zoom: 13
      },
      {
        duration: 2500,
      }
    );
  });

  var panel = document.getElementById("panel-side");
  view.ui.add(panel, "top-left");

  let locate = new Locate({
    view: view, // Attaches the Locate button to the view
    // graphic: new Graphic({
    //   symbol: { type: "simple-marker" }  // overwrites the default symbol used for the
    //   // graphic placed at the location of the user when found
    // })
    container: "locateBtn",
  });
  view.ui.add(locate, "top-right");
  view.ui.add(document.getElementById("btnN"), "top-right");
  view.ui.add(document.getElementById("btn"), "top-right");

  locate.on("locate", ({ position }) => {
    const { longitude, latitude } = position.coords;
    console.log(`lat: ${latitude.toFixed(4)}, long: ${longitude.toFixed(4)}`);
    panel.style.visibility = "visible";
    panel.innerHTML = `Your location is at lat: ${latitude.toFixed(
      4
    )}, long: ${longitude.toFixed(4)}`;
    console.log(panel.innerText);
  });

  document.getElementById("btnN").addEventListener("click", () => {
    console.log(geoJSONData.features, "geoJSONData.features");
    panel.style.visibility = "visible";
    panel.innerHTML = `Number of current locations on the map is ${geoJSONData.features.length}`;
    view.goTo(myLayer.fullExtent);
  });

  document.getElementById("btn").addEventListener("click", getRoute);

  function getRoute() {
    view.whenLayerView(myLayer).then(function (layerView) {
      layerView.queryFeatures().then(async function (results) {
        await results;
        console.log(results, "TTT"); // prints all the client-side features to the console
        console.log(results, "rrrrrrr"); // prints all the client-side features to the console

        const pattern = /lat:\s*(-?\d+(\.\d+)?),\s*long:\s*(-?\d+(\.\d+)?)/;
        const match = panel.innerText.match(pattern);
        if (match) {
          const latitude = parseFloat(match[1]);
          const longitude = parseFloat(match[3]);
          var markerSymbol = {
            type: "picture-marker", // autocasts as new PictureMarkerSymbol()
            url: "https://daraobeirne.github.io/kisspng-drawing-pin-world-map-logo-push-vector-5ae029f6ddeaf4.198342921524640246909.png",
            width: "30px",
            height: "30px",
          };

          // results.features.push(mylocation);
          console.log(results, "results");
          let feature = new FeatureSet();
  
          var mylocation = new Graphic({
            attributes: { Name: "Redlanwds" },
            geometry: new Point({ x: longitude, y: latitude }),
            symbol: markerSymbol,
          });
          feature.features.push(mylocation);
  
          results.features.forEach((feat) => {
            var mylocations = new Graphic({
              // attributes: { Name: "Redlanwds" },
              geometry: new Point({
                x: feat.geometry.longitude,
                y: feat.geometry.latitude,
              }),
            });
            feature.features.push(mylocations);
            return feature;
          });
          console.log(feature, "feature");
  
          const routeParams = new RouteParameters({
            stops: feature,
            // findBestSequence: true,
            apiKey: esriConfig.apiKey,
            returnDirections: true,
            returnStops: true,
          });
  
          route.solve(routeUrl, routeParams).then(routeSolveDidComplete);


        } else {
          var markerSymbol = {
            type: "picture-marker", // autocasts as new PictureMarkerSymbol()
            url: "https://daraobeirne.github.io/kisspng-drawing-pin-world-map-logo-push-vector-5ae029f6ddeaf4.198342921524640246909.png",
            // url: "https://arcgis.github.io/arcgis-samples-javascript/sample-data/cat3.png",
            width: "30px",
            height: "30px",
          };
  
          // var mylocation = new Graphic({
          //   attributes: { Name: "Redlanwds" },
          //   geometry: new Point({ x: longitude, y: latitude })
          // })
  
          // results.features.push(mylocation);
          console.log(results, "results");
          let feature = new FeatureSet();
  
          // var mylocation = new Graphic({
          //   attributes: { Name: "Redlanwds" },
          //   geometry: new Point({ x: 3.5, y: 7.52 }),
          //   symbol: markerSymbol,
          // });
          // feature.features.push(mylocation);
  
          results.features.forEach((feat) => {
            var mylocations = new Graphic({
              // attributes: { Name: "Redlanwds" },
              geometry: new Point({
                x: feat.geometry.longitude,
                y: feat.geometry.latitude,
              }),
            });
            feature.features.push(mylocations);
            return feature;
          });
          console.log(feature, "feature");
  
          const routeParams = new RouteParameters({
            stops: feature,
            // findBestSequence: true,
            apiKey: esriConfig.apiKey,
            returnDirections: true,
            returnStops: true,
          });
  
          route.solve(routeUrl, routeParams).then(routeSolveDidComplete);
  
        }
        



      });

    });
  }

  const routeSolveDidComplete = (res) => {
    // get the optimized route results, first result in promise
    const optRouteResult = res.routeResults[0];
    // show optimized result route
    optResultsLayer.removeAll();
    showRoutes(optRouteResult, optResultsLayer, [50, 150, 255, 1], true);

    updateMapExtent(optResultsLayer);
  };

  const updateMapExtent = (graphicsLayer) => {
    const geoms = graphicsLayer.graphics.map((g) => {
      return g.geometry;
    });
    geometryEngineAsync.union(geoms.toArray()).then((results) => {
      view.goTo(results.extent);
    });
  };

  const showRoutes = (fromResults, inLayer, color, includeStops) => {
    const routeResult = fromResults.route;
    routeResult.symbol = {
      type: "simple-line", // autocasts as SimpleLineSymbol()
      color: color,
      width: 5,
    };
    routeResult.popupTemplate = {
      title: "Route: {Name}",
      content: [
        {
          type: "fields",
          fieldInfos: [
            {
              fieldName: "StopCount",
              label: "Stop count",
              visible: true,
            },
            {
              fieldName: "FirstStopID",
              label: "First stop id",
              visible: true,
            },
            {
              fieldName: "LastStopID",
              label: "Last stop id",
              visible: true,
            },
            {
              fieldName: "Total_TravelTime",
              label: "Travel time",
              visible: true,
            },
            {
              fieldName: "Total_Miles",
              label: "Distance",
              visible: true,
            },
          ],
        },
      ],
    };
    inLayer.add(routeResult);

    if (includeStops) {
      // add  stops
      fromResults.stops.forEach((stop) => {
        const stopGraphic = new Graphic({
          geometry: {
            type: "point",
            latitude: stop.attributes.SnapY,
            longitude: stop.attributes.SnapX,
          },
          symbol: {
            type: "simple-marker",
            color: "#FFFFFF",
            outline: {
              color: color,
              width: 0.5,
            },
          },
          size: "18px",
        });
        inLayer.add(stopGraphic);
        const stopSequence = new Graphic({
          symbol: {
            type: "text",
            text: stop.attributes.Sequence,
            font: { size: 9 },
            yoffset: -3,
            color: [0, 0, 0],
          },
          geometry: {
            type: "point",
            latitude: stop.attributes.SnapY,
            longitude: stop.attributes.SnapX,
          },
          popupTemplate: {
            title: `Stop: ${stop.attributes.Name}`,
            content: `Sequence: ${stop.attributes.Sequence}`,
          },
        });
        inLayer.add(stopSequence);
      });
    }
  };
});
